#!/usr/bin/env node

'use strict';

var fs = require('fs');
var path = require('path');
var command = require('ydr-utils').command;
var debug = require('ydr-utils').debug;
var string = require('ydr-utils').string;

var pkg = require('../package.json');
var bannerPath = path.join(__dirname, '../utils/banner.txt');
var bannerText = fs.readFileSync(bannerPath, 'utf8');

var showBanner = function () {
    console.log(bannerText);
    //console.log('╔═════════════════════════════════════════╗');
    //console.log('║  ', 'coolie@' + string.padRight(pkg.version, 8, ' '), '                      ║');
    //console.log('║  ', pkg.description, '   ║');
    //console.log('╚═════════════════════════════════════════╝');
    //console.log();
};

command.alias({
    h: 'help',
    H: 'help',
    v: 'version',
    V: 'version'
});

command.if('help', function () {
    showBanner();
    var options = {
        eventAlign: 'left'
    };
    console.log('1. usage');
    debug.success('   build', 'build a front-end project in current dirname', options);
    debug.success('   book', 'open coolie book in default browser', options);
    debug.success('   install <name>', 'install some package in current dirname, like coolie', options);
    debug.success('   init', 'init `coolie-config.js` in current dirname', options);
    debug.success('   help', 'show help info', options);
    console.log();
    console.log('2. options');
    debug.normal('   -d', '--dirname', options);
    console.log();
});

command.if('book', function () {

});

command.if('install', function () {

});

command.if('init', function () {

});

command.else(function () {
    command.exec('help');
});

command.parse(process.argv);

